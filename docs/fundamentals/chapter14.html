<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.15">
<title data-react-helmet="true">Custom Resource Definitions | CKA Prep</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://your-docusaurus-test-site.com/cka-prep/docs/fundamentals/chapter14"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Custom Resource Definitions | CKA Prep"><meta data-react-helmet="true" name="description" content="Course Reading"><meta data-react-helmet="true" property="og:description" content="Course Reading"><link data-react-helmet="true" rel="icon" href="/cka-prep/img/k8s.png"><link data-react-helmet="true" rel="canonical" href="https://your-docusaurus-test-site.com/cka-prep/docs/fundamentals/chapter14"><link data-react-helmet="true" rel="alternate" href="https://your-docusaurus-test-site.com/cka-prep/docs/fundamentals/chapter14" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://your-docusaurus-test-site.com/cka-prep/docs/fundamentals/chapter14" hreflang="x-default"><link rel="stylesheet" href="/cka-prep/assets/css/styles.e68b4784.css">
<link rel="preload" href="/cka-prep/assets/js/runtime~main.4faeff8b.js" as="script">
<link rel="preload" href="/cka-prep/assets/js/main.789f7562.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/cka-prep/"><div class="navbar__logo"><img src="/cka-prep/img/kubernetes-icon.svg" alt="My Site Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/cka-prep/img/kubernetes-icon.svg" alt="My Site Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">CKA Prep</b></a><a class="navbar__item navbar__link navbar__link--active" href="/cka-prep/docs/intro">Notes</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/andrewdaoust/cka-prep" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_Pssr toggle_TdHA toggleDisabled_jDku"><div class="toggleTrack_SSoT" role="button" tabindex="-1"><div class="toggleTrackCheck_XobZ"><span class="toggleIcon_eZtF">ðŸŒœ</span></div><div class="toggleTrackX_YkSC"><span class="toggleIcon_eZtF">ðŸŒž</span></div><div class="toggleTrackThumb_uRm4"></div></div><input type="checkbox" class="toggleScreenReader_JnkT" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y"><nav class="menu thin-scrollbar menu_SkdO"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cka-prep/docs/intro">Kubernetes Resources</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active hasHref_VCh3" aria-current="page" href="/cka-prep/docs/fundamentals">Kubernetes Fundamentals</a><button aria-label="Toggle the collapsible sidebar category &#x27;Kubernetes Fundamentals&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cka-prep/docs/fundamentals/chapter01">Course Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cka-prep/docs/fundamentals/chapter02">Basics of Kubernetes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cka-prep/docs/fundamentals/chapter03">Installation and Configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cka-prep/docs/fundamentals/chapter04">Kubernetes Architecture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cka-prep/docs/fundamentals/chapter05">APIs and Access</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cka-prep/docs/fundamentals/chapter06">API Objects</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cka-prep/docs/fundamentals/chapter07">Managing State with Deployments</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cka-prep/docs/fundamentals/chapter08">Volumes and Data</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cka-prep/docs/fundamentals/chapter09">Services</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cka-prep/docs/fundamentals/chapter10">Helm</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cka-prep/docs/fundamentals/chapter11">Ingress</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cka-prep/docs/fundamentals/chapter12">Scheduling</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cka-prep/docs/fundamentals/chapter13">Logging and Troubleshooting</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/cka-prep/docs/fundamentals/chapter14">Custom Resource Definitions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cka-prep/docs/fundamentals/chapter15">Security</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cka-prep/docs/fundamentals/chapter16">High Availability</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cka-prep/docs/fundamentals/chapter17">Exam Domain Review</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cka-prep/docs/fundamentals/follow-up">Follow-up Items</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/cka-prep/docs/kubectl/setup">kubectl</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/cka-prep/docs/hard-way/about">Kubernetes the Hard Way</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link hasHref_VCh3" href="/cka-prep/docs/linux">Linux</a><button aria-label="Toggle the collapsible sidebar category &#x27;Linux&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link hasHref_VCh3" href="/cka-prep/docs/misc">Miscellaneous Topics</a><button aria-label="Toggle the collapsible sidebar category &#x27;Miscellaneous Topics&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Custom Resource Definitions</h1></header><h2 id="course-reading">Course Reading</h2><h3 id="learning-objectives">Learning objectives</h3><ul><li>Grow available Kubernetes objects</li><li>Deploy a custom resource definition (CRD)</li><li>Deploy a new resource and API endpoints</li><li>Discuss aggregates APIs</li></ul><h3 id="custom-resources">Custom Resources</h3><p>Kubernetes allows the flexibility to add your own dynamic resources to the cluster, outside the scope of those built-in.  Once a custom resource has been added, it can be created through the same methods of any other built-in resource, like with <code>kubectl</code>.</p><p>For a custom resource to be made part of the API, it needs a controller to receive the specification for that object and work to maintain the object in that state. These custom controllers should handle all the tasks a human would have to take if deploying the application outside of Kubernetes.</p><p>There are two methods for adding custom resource to the cluster that offer different levels of flexibility.  The less flexible option is to add a <strong>custom resource definition</strong> (CRD). The more flexible option is to add <strong>aggregated APIs</strong> (AA), which uses a new API server to be written and deployed in the cluster. Both options still manage custom resources outside the scope of the built-ins.</p><p>With RBAC, you will need to allow access to the new CRD resources and controller.  When using an AA, you can use the typical auth methods or a different one.</p><h3 id="custom-resource-definitions">Custom resource definitions</h3><p>When a new API object and controller is added via CRDs, the existing kube-apiserver can be used to monitor and control the object&#x27;s state. A CRD will add a new path to the API, under the <code>apiextensions.k8s.io/v1</code> group.</p><p>CRDs are the easiest way to add a new type of object to the cluster, although it is less flexible. Only the existing API functionality can be used, objects must respond to RESTful requests, and their state must be validated and stored in the same way built-in API objects do.</p><p>CRDs also allow the new resources to be deployed in a namespace or cluster wide. The manifest uses the <code>scope</code> field and takes the value of either <code>Namespaced</code> or <code>Cluster</code> depending on how it should be deployed.</p><h4 id="example">Example</h4><pre><code class="language-yaml">apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: backups.stable.linux.com
spec:
  group: stable.linux.com
  version: v1
  scope: Namespaced
  names:
    plural: backups
    singular: backup
    shortNames:
    - bks
    kind: BackUp
</code></pre><p>Let&#x27;s walk through each part of this example</p><p>Like any manifest, we begin with the <code>apiVersion</code>, which for a CRD must be <code>apiextensions.k8s.io/v1</code>.</p><p>Next is the kind, which for a CRD is <code>CustomResourceDefinition</code>.</p><p>In the <code>metadata</code> field, the <code>name</code> must match the later defined spec.  It must have the structure of <code>&lt;spec.names.plural&gt;.&lt;spec.group&gt;</code>.</p><p>Next is the <code>group</code> which is used to determine the endpoint in the API which is in the structure <code>/apis/&lt;group&gt;/&lt;version&gt;</code>, which for this example specifically is <code>/apis/stable/v1</code>.</p><p>The <code>scope</code> determines if the objects must exist in a namespace or be cluster-wide.</p><p>The <code>plural</code> field is what determines the end of the API url, so in this case it would be <code>/apis/stable/v1/backups</code>.</p><p>The <code>singular</code> and <code>shortName</code> fields are used to make CLI easier.  This is the same ideas of being able to retrieve pods with <code>pods</code>, <code>pod</code> or <code>po</code>.</p><p>Finally, the <code>spec.kind</code> field determines the camel cased name that would be used when writing a manifest for one of these objects.</p><h4 id="defining-the-new-object">Defining the new object</h4><p>To then define the object the CRD creates would look something like this.</p><pre><code class="language-yaml">apiVersion: &quot;stable.linux.com/v1&quot;
kind: BackUp
metadata:
  name: new-backup-object
spec:
  timeSpec: &quot;* * * * */5&quot;
  image: linux-backup-image
replicas: 5
</code></pre><p>The <code>apiVersion</code> and the <code>kind</code> must match what is specified in the CRD.  The fields in <code>spec</code> all depend on the associated controller. If the controller has validation, it would check the values to be what is expected and error if it does not match. With no validation, only the existence of the needed fields is checked.</p><h3 id="optional-hooks">Optional hooks</h3><h4 id="finalizer">Finalizer</h4><p>Just like built-in objects, an asynchronous pre-delete hook called a <code>Finalizer</code> can be used.  When the API receives a <code>delete</code> request, the <code>metadata.deletionTimestamp</code> field is updated and then the configured finalizer is run. When a finalizer completes, it is removed from the list and the next one is processed, until the list is empty.</p><pre><code class="language-yaml">metadata:
  finalizer:
  - finalizer.stable.linux.com
</code></pre><h4 id="validation">Validation</h4><p>Validation for custom objects can also be done using the OpenAPI v3 schema. This will check the properties being passed in a manifest defining the resource.</p><pre><code class="language-yaml">validation:
  openAPIV3Schema:
    properties:
      spec:
        properties:
          timeSpec:
            type: string
            pattern: &#x27;^(\d+|\*)(/\d+)?(\s+(\d+|\*)(/\d+)?){4}$&#x27;
          replicas:
            type: integer
            minimum: 1
            maximum: 10
</code></pre><p>Here <code>timeSpec</code> field must match a certain string pattern, and the <code>replicas</code> field must be an integer between 1 and 10.</p><h3 id="understanding-aggregated-apis">Understanding Aggregated APIs</h3><p>Aggregated APIs allow adding more Kubernetes-like API servers to the cluster.  The additional servers are subordinate to the kube-apiserver, which will run the aggregation layer. Then when a new custom resource is requested, the aggregation layer will listen for any URLs and proxy them to the new API if it is responsible for that object.</p><p>The aggregation layer can be enabled by adding the <code>enable-aggregator-routing=true</code> flag to the kube-apiserver start-up commands.</p><p>Configuring TLS between components and RBAC rules is necessary.</p><h2 id="lab-exercises">Lab Exercises</h2><h3 id="lab-141---create-a-custom-resource-definition">Lab 14.1 - Create a Custom Resource Definition</h3><p>First view any existing CRDs on the cluster.</p><div style="border-radius:10px"><div style="display:flex;background-color:#edeeef;padding:6px;border-top-left-radius:10px;border-top-right-radius:10px"><div style="background-color:#FF605C;border-radius:100%;width:10px;height:10px;margin:3px"></div><div style="background-color:#FFBD44;border-radius:100%;width:10px;height:10px;margin:3px"></div><div style="background-color:#00CA4E;border-radius:100%;width:10px;height:10px;margin:3px"></div></div><div style="background-color:black;color:#00ff01;font-family:monospace;border-bottom-left-radius:10px;border-bottom-right-radius:10px;padding-top:5px;padding-bottom:5px;padding-left:4px;margin-bottom:10px"><p style="margin:0px;padding:2px">ubuntu@cp:~ $ kubectl get crd --all-namespaces</p></div></div><p>You should see they are all for the Calico network plugin we used when building the cluster as well as for linkerd. If you were to look at the <code>calico.yaml</code> file we used when first building the cluster, you would see the <code>CustomResourceDefinition</code>s that where added.</p><div style="border-radius:10px"><div style="display:flex;background-color:#edeeef;padding:6px;border-top-left-radius:10px;border-top-right-radius:10px"><div style="background-color:#FF605C;border-radius:100%;width:10px;height:10px;margin:3px"></div><div style="background-color:#FFBD44;border-radius:100%;width:10px;height:10px;margin:3px"></div><div style="background-color:#00CA4E;border-radius:100%;width:10px;height:10px;margin:3px"></div></div><div style="background-color:black;color:#00ff01;font-family:monospace;border-bottom-left-radius:10px;border-bottom-right-radius:10px;padding-top:5px;padding-bottom:5px;padding-left:4px;margin-bottom:10px"><p style="margin:0px;padding:2px">ubuntu@cp:~ $ cat calico.yaml</p></div></div><p>Having looked at some exampled, let&#x27;s build our own.</p><div style="border-radius:10px"><div style="display:flex;background-color:#edeeef;padding:6px;border-top-left-radius:10px;border-top-right-radius:10px"><div style="background-color:#FF605C;border-radius:100%;width:10px;height:10px;margin:3px"></div><div style="background-color:#FFBD44;border-radius:100%;width:10px;height:10px;margin:3px"></div><div style="background-color:#00CA4E;border-radius:100%;width:10px;height:10px;margin:3px"></div></div><div style="background-color:black;color:#00ff01;font-family:monospace;border-bottom-left-radius:10px;border-bottom-right-radius:10px;padding-top:5px;padding-bottom:5px;padding-left:4px;margin-bottom:10px"><p style="margin:0px;padding:2px">ubuntu@cp:~ $ vim crd.yaml</p></div></div><pre><code class="language-yaml">apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: crontabs.stable.example.com
spec:
  group: stable.example.com
  versions:
  - name: v1
    served: true
    storage: true
    schema:
      openAPIV3Schema:
        type: object
        properties:
          spec:
            type: object
            properties:
              cronSpec:
                type: string
              image:
                type: string
              replicas:
                type: integer
  scope: Namespaced
  names:
    plural: crontabs
    singular: crontabs
    shortNames:
    - ct
    kind: CronTab
</code></pre><p>Now create the CRD, view it among the others and describe it.</p><div style="border-radius:10px"><div style="display:flex;background-color:#edeeef;padding:6px;border-top-left-radius:10px;border-top-right-radius:10px"><div style="background-color:#FF605C;border-radius:100%;width:10px;height:10px;margin:3px"></div><div style="background-color:#FFBD44;border-radius:100%;width:10px;height:10px;margin:3px"></div><div style="background-color:#00CA4E;border-radius:100%;width:10px;height:10px;margin:3px"></div></div><div style="background-color:black;color:#00ff01;font-family:monospace;border-bottom-left-radius:10px;border-bottom-right-radius:10px;padding-top:5px;padding-bottom:5px;padding-left:4px;margin-bottom:10px"><p style="margin:0px;padding:2px">ubuntu@cp:~ $ kubectl create -f crd.yaml</p><p style="margin:0px;padding:2px">ubuntu@cp:~ $ kubectl get crd</p><p style="margin:0px;padding:2px">ubuntu@cp:~ $ kubectl describe crd crontabs.stable.example.com</p></div></div><p>Now, let&#x27;s create a new <code>CronTab</code> object.  Note that it will not do anything since there is no associated controller with this object.</p><div style="border-radius:10px"><div style="display:flex;background-color:#edeeef;padding:6px;border-top-left-radius:10px;border-top-right-radius:10px"><div style="background-color:#FF605C;border-radius:100%;width:10px;height:10px;margin:3px"></div><div style="background-color:#FFBD44;border-radius:100%;width:10px;height:10px;margin:3px"></div><div style="background-color:#00CA4E;border-radius:100%;width:10px;height:10px;margin:3px"></div></div><div style="background-color:black;color:#00ff01;font-family:monospace;border-bottom-left-radius:10px;border-bottom-right-radius:10px;padding-top:5px;padding-bottom:5px;padding-left:4px;margin-bottom:10px"><p style="margin:0px;padding:2px">ubuntu@cp:~ $ vim crontab.yaml</p></div></div><pre><code class="language-yaml">apiVersion: &quot;stable.example.com/v1&quot;
kind: CronTab
metadata:
  name: new-crontab
spec:
  cronSpec: &quot;* */4 * * *&quot;
  # This image doesn&#x27;t need to exist in this case
  image: some-image
</code></pre><div style="border-radius:10px"><div style="display:flex;background-color:#edeeef;padding:6px;border-top-left-radius:10px;border-top-right-radius:10px"><div style="background-color:#FF605C;border-radius:100%;width:10px;height:10px;margin:3px"></div><div style="background-color:#FFBD44;border-radius:100%;width:10px;height:10px;margin:3px"></div><div style="background-color:#00CA4E;border-radius:100%;width:10px;height:10px;margin:3px"></div></div><div style="background-color:black;color:#00ff01;font-family:monospace;border-bottom-left-radius:10px;border-bottom-right-radius:10px;padding-top:5px;padding-bottom:5px;padding-left:4px;margin-bottom:10px"><p style="margin:0px;padding:2px">ubuntu@cp:~ $ kubectl create -f crontab.yaml</p><p style="margin:0px;padding:2px">ubuntu@cp:~ $ kubectl get crontabs</p><p style="margin:0px;padding:2px">ubuntu@cp:~ $ kubectl get ct</p><p style="margin:0px;padding:2px">ubuntu@cp:~ $ kubectl describe ct</p></div></div><p>You can then delete the CRD, which should also remove the API endpoints and all objects.</p><div style="border-radius:10px"><div style="display:flex;background-color:#edeeef;padding:6px;border-top-left-radius:10px;border-top-right-radius:10px"><div style="background-color:#FF605C;border-radius:100%;width:10px;height:10px;margin:3px"></div><div style="background-color:#FFBD44;border-radius:100%;width:10px;height:10px;margin:3px"></div><div style="background-color:#00CA4E;border-radius:100%;width:10px;height:10px;margin:3px"></div></div><div style="background-color:black;color:#00ff01;font-family:monospace;border-bottom-left-radius:10px;border-bottom-right-radius:10px;padding-top:5px;padding-bottom:5px;padding-left:4px;margin-bottom:10px"><p style="margin:0px;padding:2px">ubuntu@cp:~ $ kubectl delete -f crd.yaml</p><p style="margin:0px;padding:2px">ubuntu@cp:~ $ kubectl get ct</p></div></div><h2 id="knowledge-check">Knowledge check</h2><ul><li>When adding a new API object to the kube-apiserver, we use a <strong>Custom Resource Definition</strong></li><li>When we add a new API server that is subordinate to the kube-apiserver, we use <strong>Aggregated APIs</strong></li><li>CRDs are <strong>not</strong> required to live in a namespace</li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/fundamentals/chapter14.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/cka-prep/docs/fundamentals/chapter13"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Logging and Troubleshooting</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/cka-prep/docs/fundamentals/chapter15"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Security</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#course-reading" class="table-of-contents__link toc-highlight">Course Reading</a><ul><li><a href="#learning-objectives" class="table-of-contents__link toc-highlight">Learning objectives</a></li><li><a href="#custom-resources" class="table-of-contents__link toc-highlight">Custom Resources</a></li><li><a href="#custom-resource-definitions" class="table-of-contents__link toc-highlight">Custom resource definitions</a></li><li><a href="#optional-hooks" class="table-of-contents__link toc-highlight">Optional hooks</a></li><li><a href="#understanding-aggregated-apis" class="table-of-contents__link toc-highlight">Understanding Aggregated APIs</a></li></ul></li><li><a href="#lab-exercises" class="table-of-contents__link toc-highlight">Lab Exercises</a><ul><li><a href="#lab-141---create-a-custom-resource-definition" class="table-of-contents__link toc-highlight">Lab 14.1 - Create a Custom Resource Definition</a></li></ul></li><li><a href="#knowledge-check" class="table-of-contents__link toc-highlight">Knowledge check</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/cka-prep/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/andrewdaoust/cka-prep" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2023 Andrew D'Aoust. Built with Docusaurus.</div></div></div></footer></div>
<script src="/cka-prep/assets/js/runtime~main.4faeff8b.js"></script>
<script src="/cka-prep/assets/js/main.789f7562.js"></script>
</body>
</html>